@model dynamic
<div class="alert success">@TempData["Success"]</div>
}


<form asp-controller="Report" asp-action="Submit" method="post" enctype="multipart/form-data" class="report-form">
    <label>Location</label>
    <input name="location" placeholder="Where is the issue? (street, suburb)" />


    <label>Category</label>
    <select name="category">
        @foreach (var c in categories)
        {
            <option value="@c">@c</option>
        }
    </select>


    <label>Description</label>
<textarea name="description" rows="6" placeholder="Describe the issue in detail..."></textarea>


    <label>Attach image / document (optional)</label>
    <input type="file" name="attachment" />


    <div class="buttons">
        <button type="submit" class="primary">Submit</button>
        <button type="button" onclick="location.href='@Url.Action("Index", "Home")'">Back to Main Menu</button>
    </div>
</form>


<div class="engagement-small">
    <h4>Reporting Progress</h4>
    <progress id="engProgress2" max="@target" value="@count"></progress>
    <div id="engMsg">@GetEncouragingMessage(count)</div>
</div>


@section Scripts {
    <script>
        // Tiny client-side niceties: change encouragement message depending on count
        (function(){
        const messages = [
        'Be the first to report — help improve our community!',
        'Great start — every report helps. Keep them coming!',
        'Nice work — community participation is growing.',
        'Almost there — let\'s reach our community target!',
        'Amazing — target reached! Thank you.'
        ];
        // Already rendered server-side; this shows how to programmatically change text on future dynamic pages.
        })();
    </script>
}


@functions {
    string GetEncouragingMessage(int count)
    {
        if (count == 0) return "Be the first to report — help improve our community!";
        if (count < 3) return "Great start — every report helps. Keep them coming!";
        if (count < 7) return "Nice work — community participation is growing.";
        if (count < 10) return "Almost there — let's reach our community target of 10 reports!";
        return "Amazing — community engagement target reached! Thank you.";
    }
}
